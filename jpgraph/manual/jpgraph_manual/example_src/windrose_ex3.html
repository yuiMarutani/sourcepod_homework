<code><span style="color: #000000"> <span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #FF8000">//&nbsp;content="text/plain;&nbsp;charset=utf-8"<br /> </span><span style="color: #007700">require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph.php'</span><span style="color: #007700">);<br /> require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph_windrose.php'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;データは方位軸番号でも方位ラベルでもどちらでも指定できます。<br /> </span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2.5</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">7</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">7</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /> &nbsp;<br /> </span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"n"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2.5</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"ssw"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"se"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">7</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">));<br /> &nbsp;<br /> </span><span style="color: #FF8000">//複数のプロット作成を容易にするため、<br /> //各プロットの位置やサイズを配列に格納する。<br /> //レイアウト・データのためのフォーマットは、&nbsp;<br /> //&nbsp;(風配図タイプ,Y軸位置,X軸位置,プロットサイズ,中心円のサイズ)となります。<br /> </span><span style="color: #0000BB">$layout&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">WINDROSE_TYPE8</span><span style="color: #007700">,</span><span style="color: #0000BB">0.25</span><span style="color: #007700">,</span><span style="color: #0000BB">0.55</span><span style="color: #007700">,</span><span style="color: #0000BB">0.4</span><span style="color: #007700">,</span><span style="color: #0000BB">0.25</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">WINDROSE_TYPE16</span><span style="color: #007700">,</span><span style="color: #0000BB">0.75</span><span style="color: #007700">,</span><span style="color: #0000BB">0.55</span><span style="color: #007700">,</span><span style="color: #0000BB">0.4</span><span style="color: #007700">,</span><span style="color: #0000BB">0.25</span><span style="color: #007700">));<br /> &nbsp;<br /> </span><span style="color: #0000BB">$legendtxt&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'(m/s)&nbsp;Station&nbsp;7'</span><span style="color: #007700">,</span><span style="color: #DD0000">'(m/s)&nbsp;Station&nbsp;12'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//影付き(dropshadow)の風配図グラフ・エリアを作成。<br /> </span><span style="color: #0000BB">$graph&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindroseGraph</span><span style="color: #007700">(</span><span style="color: #0000BB">600</span><span style="color: #007700">,</span><span style="color: #0000BB">350</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetShadow</span><span style="color: #007700">(</span><span style="color: #DD0000">'darkgray'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//タイトル・サブタイトルを設定。<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'Windrose&nbsp;example&nbsp;3'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_VERDANA</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_BOLD</span><span style="color: #007700">,</span><span style="color: #0000BB">12</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'(Multiple&nbsp;plots&nbsp;in&nbsp;the&nbsp;same&nbsp;graph)'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_VERDANA</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">9</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//２つの風配図プロットを作成。<br /> </span><span style="color: #007700">for(&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);&nbsp;++</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">)&nbsp;{<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindrosePlot</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;8本方位軸タイプに設定。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetType</span><span style="color: #007700">(</span><span style="color: #0000BB">$layout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;目盛りラベルのフォントとフォント・カラーを設定。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">scale</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_TIMES</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">scale</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFontColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;プロットの位置をX軸Y軸で設定。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetPos</span><span style="color: #007700">(</span><span style="color: #0000BB">$layout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #0000BB">$layout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;プロットの直径をグラフ・エリアの幅のピクセル数の40%に設定。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetSize</span><span style="color: #007700">(</span><span style="color: #0000BB">$layout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;中心円の直径をプロットの直径の25％に設定。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetZCircleSize</span><span style="color: #007700">(</span><span style="color: #0000BB">$layout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;コンパス方位のフォントとフォント・カラーを設定。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_ARIAL</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetFontColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'darkgreen'</span><span style="color: #007700">);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;凡例テキストを追加。<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">legend</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetText</span><span style="color: #007700">(</span><span style="color: #0000BB">$legendtxt</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]);<br /> &nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$wp</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]);<br /> }<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;作成したグラフをブラウザに返す。<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Stroke</span><span style="color: #007700">();<br /> </span><span style="color: #0000BB">?&gt;</span> </span> </code>