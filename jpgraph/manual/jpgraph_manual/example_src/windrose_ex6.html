<code><span style="color: #000000"> <span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #FF8000">//&nbsp;content="text/plain;&nbsp;charset=utf-8"<br /> </span><span style="color: #007700">require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph.php'</span><span style="color: #007700">);<br /> require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph_windrose.php'</span><span style="color: #007700">);<br /> </span><br /><span style="color: #FF8000">//&nbsp;データは方位軸番号でも方位ラベルでもどちらでも指定できます。<br /> </span><span style="color: #0000BB">（ここで使われているのは「角度」では？）<br /> $data&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'10'&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2.5</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'32.0'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'120.5'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'223.2'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'285.7'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br /> );<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;方位ラベルのテキストを指定する。<br /> </span><span style="color: #0000BB">$labels&nbsp;</span><span style="color: #007700">=&nbsp;array(&nbsp;</span><span style="color: #DD0000">'120.5'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Plant\n#1275"</span><span style="color: #007700">,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'285.7'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"Reference\n#13&nbsp;Ver:2"</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;バケット・レンジに使う色を配列に格納する。<br /> </span><span style="color: #0000BB">$rangeColors&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'khaki'</span><span style="color: #007700">,</span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">,</span><span style="color: #DD0000">'orange'</span><span style="color: #007700">,</span><span style="color: #DD0000">'orange:0.7'</span><span style="color: #007700">,</span><span style="color: #DD0000">'brown'</span><span style="color: #007700">,</span><span style="color: #DD0000">'darkred'</span><span style="color: #007700">,</span><span style="color: #DD0000">'black'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;風配図グラフ・エリアを作成する。<br /> </span><span style="color: #0000BB">First&nbsp;create&nbsp;a&nbsp;</span><span style="color: #007700">new&nbsp;</span><span style="color: #0000BB">windrose&nbsp;graph&nbsp;with&nbsp;a&nbsp;title<br /> $graph&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindroseGraph</span><span style="color: #007700">(</span><span style="color: #0000BB">400</span><span style="color: #007700">,</span><span style="color: #0000BB">450</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//タイトルを設定する<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'Windrose&nbsp;example&nbsp;6'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_VERDANA</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_BOLD</span><span style="color: #007700">,</span><span style="color: #0000BB">12</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//サブタイトルを設定する<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'(Free&nbsp;type&nbsp;plot)'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_VERDANA</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_ITALIC</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;風配図プロットを作成する。<br /> </span><span style="color: #0000BB">$wp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindrosePlot</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;フリー・タイプのプロットに設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetType</span><span style="color: #007700">(</span><span style="color: #0000BB">WINDROSE_TYPEFREE</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;ラベルを設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetLabels</span><span style="color: #007700">(</span><span style="color: #0000BB">$labels</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetLabelPosition</span><span style="color: #007700">(</span><span style="color: #0000BB">LBLPOSITION_CENTER</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetLabelMargin</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;バケット・レンジの色を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetRangeColors</span><span style="color: #007700">(</span><span style="color: #0000BB">$rangeColors</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;目盛りラベルのフォントとフォント・カラーを設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scale</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_ARIAL</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">9</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;プロットの直径と位置を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetSize</span><span style="color: #007700">(</span><span style="color: #0000BB">230</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetZCircleSize</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;コンパス方位ラベルのフォントとフォント・カラーを設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_ARIAL</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFontColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'darkgreen'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;Gridを構成する同心円と方位軸の色を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetGridColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'darkgreen@0.7'</span><span style="color: #007700">,</span><span style="color: #DD0000">'blue'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;テキスト「(m/s)」を凡例に追加。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">legend</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetText</span><span style="color: #007700">(</span><span style="color: #DD0000">'(m/s)'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;凡例の値を小数点以下無しで表示する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">legend</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">'%d'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;作成したプロットをグラフ・エリアに追加しブラウザに返す。<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$wp</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Stroke</span><span style="color: #007700">();<br /> </span><span style="color: #0000BB">?&gt;</span> </span> </code>