<code><span style="color: #000000"> <span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #FF8000">//&nbsp;content="text/plain;&nbsp;charset=utf-8"<br /> </span><span style="color: #007700">require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph.php'</span><span style="color: #007700">);<br /> require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph_windrose.php'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;データと方位ラベルは、方位軸番号と方位ラベルのどちらでも指定できます。<br /> </span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2.5</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">7</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">5&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">7</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;テキストを配列に格納。<br /> </span><span style="color: #0000BB">$txt</span><span style="color: #007700">=array();<br /> </span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"It&nbsp;is&nbsp;possible&nbsp;to&nbsp;add&nbsp;arbitrary,multi&nbsp;line,&nbsp;text&nbsp;to&nbsp;a&nbsp;graph.&nbsp;"</span><span style="color: #007700">;<br /> </span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.=&nbsp;</span><span style="color: #DD0000">"Such&nbsp;a&nbsp;paragraph&nbsp;can&nbsp;have&nbsp;it's&nbsp;text&nbsp;be&nbsp;left,&nbsp;right&nbsp;or&nbsp;center&nbsp;"</span><span style="color: #007700">;<br /> </span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.=&nbsp;</span><span style="color: #DD0000">"aligned."</span><span style="color: #007700">;<br /> </span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;an&nbsp;example&nbsp;of&nbsp;a&nbsp;right&nbsp;aligned&nbsp;paragraph."</span><span style="color: #007700">;<br /> </span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"Finally&nbsp;we&nbsp;can&nbsp;show&nbsp;a&nbsp;center&nbsp;aligned&nbsp;paragraph&nbsp;without&nbsp;box."</span><span style="color: #007700">;<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;配列に各テキストボックスのレイアウトを格納し<br /> //&nbsp;コードを整理する。<br /> </span><span style="color: #0000BB">$txtlayout&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">0.97</span><span style="color: #007700">,</span><span style="color: #0000BB">0.15</span><span style="color: #007700">,</span><span style="color: #0000BB">25</span><span style="color: #007700">,</span><span style="color: #DD0000">'left'</span><span style="color: #007700">,</span><span style="color: #DD0000">'black'</span><span style="color: #007700">,</span><span style="color: #DD0000">'lightblue'</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">0.97</span><span style="color: #007700">,</span><span style="color: #0000BB">0.4</span><span style="color: #007700">,</span><span style="color: #0000BB">20</span><span style="color: #007700">,</span><span style="color: #DD0000">'right'</span><span style="color: #007700">,</span><span style="color: #DD0000">'black'</span><span style="color: #007700">,</span><span style="color: #DD0000">'lightblue'</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">0.97</span><span style="color: #007700">,</span><span style="color: #0000BB">0.7</span><span style="color: #007700">,</span><span style="color: #0000BB">20</span><span style="color: #007700">,</span><span style="color: #DD0000">'center'</span><span style="color: #007700">,</span><span style="color: #DD0000">'darkred'</span><span style="color: #007700">,</span><span style="color: #0000BB">false</span><span style="color: #007700">,</span><span style="color: #0000BB">FF_COMIC</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">12</span><span style="color: #007700">),<br /> );<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;レンジの色を配列に格納。<br /> </span><span style="color: #0000BB">$rangeColors&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'silver'</span><span style="color: #007700">,</span><span style="color: #DD0000">'khaki'</span><span style="color: #007700">,</span><span style="color: #DD0000">'orange'</span><span style="color: #007700">,</span><span style="color: #DD0000">'brown'</span><span style="color: #007700">,</span><span style="color: #DD0000">'blue'</span><span style="color: #007700">,</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">,</span><span style="color: #DD0000">'maroon'</span><span style="color: #007700">,</span><span style="color: #DD0000">'red'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;新規の風配図グラフ・エリアを作成し、タイトルを設定する。<br /> </span><span style="color: #0000BB">$graph&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindroseGraph</span><span style="color: #007700">(</span><span style="color: #0000BB">570</span><span style="color: #007700">,</span><span style="color: #0000BB">430</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'Windrose&nbsp;example&nbsp;5'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_VERDANA</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_BOLD</span><span style="color: #007700">,</span><span style="color: #0000BB">12</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;グラフの背景色を設定。<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'darkgreen@0.7'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;定義済みのテキストボックス全てに対して設定を行う。<br /> </span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$txt</span><span style="color: #007700">);<br /> for(&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">;&nbsp;++</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">)&nbsp;{<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]&nbsp;=&nbsp;new&nbsp;</span><span style="color: #0000BB">Text</span><span style="color: #007700">(</span><span style="color: #0000BB">$txt</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetPos</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">],</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #DD0000">'right'</span><span style="color: #007700">);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetWordwrap</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetParagraphAlign</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetBox</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">5</span><span style="color: #007700">]);<br /> &nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">])&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">6&nbsp;</span><span style="color: #007700">)<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">6</span><span style="color: #007700">],</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">7</span><span style="color: #007700">],</span><span style="color: #0000BB">$txtlayout</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">][</span><span style="color: #0000BB">8</span><span style="color: #007700">]);<br /> }<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$txtbox</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;風配図プロットを作成する。<br /> </span><span style="color: #0000BB">Create&nbsp;the&nbsp;windrose&nbsp;plot</span><span style="color: #007700">.<br /> </span><span style="color: #0000BB">$wp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindrosePlot</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;プロット・エリアの背景色を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'lightyellow'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;プロットの周りの枠線を追加する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetBox</span><span style="color: #007700">();<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;各バケット・レンジの色を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetRangeColors</span><span style="color: #007700">(</span><span style="color: #0000BB">$rangeColors</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;目盛りラベルのフォントとフォント・カラーを設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scale</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_ARIAL</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">9</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scale</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFontColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'navy'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;プロットの直径と位置を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetSize</span><span style="color: #007700">(</span><span style="color: #0000BB">190</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetPos</span><span style="color: #007700">(</span><span style="color: #0000BB">0.35</span><span style="color: #007700">,</span><span style="color: #0000BB">0.53</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetZCircleSize</span><span style="color: #007700">(</span><span style="color: #0000BB">0.2</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;コンパス方位ラベルのフォントとフォント・カラーを設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_ARIAL</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_NORMAL</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFontColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'darkgreen'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;コンパス方位のマージンを設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetLabelMargin</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;Gridを構成する同心円と方位軸の色を設定する。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetGridColor</span><span style="color: #007700">(</span><span style="color: #DD0000">'silver'</span><span style="color: #007700">,</span><span style="color: #DD0000">'blue'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;テキスト「(m/s)」を凡例に追加。<br /> //&nbsp;凡例のマージンを設定。<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">legend</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetText</span><span style="color: #007700">(</span><span style="color: #DD0000">'(m/s)'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">legend</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetMargin</span><span style="color: #007700">(</span><span style="color: #0000BB">20</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;プロットをグラフ・エリアに追加しグラフをブラウザに返す。<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$wp</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Stroke</span><span style="color: #007700">();<br /> </span><span style="color: #0000BB">?&gt;</span> </span> </code>