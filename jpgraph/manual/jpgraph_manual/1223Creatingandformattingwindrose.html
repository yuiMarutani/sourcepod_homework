<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Shift_JIS">
<LINK REL="Start" HREF="index.html">
<LINK REL="Contents" HREF="toc.html">
<LINK REL="Prev" HREF="1222Differenttypeofwindrose.html">
<LINK REL="Next" HREF="12231Specifyingwindrosescale.html">
<STYLE TYPE="text/css">
<!--
BODY { font-family: serif }
H1 { font-family: sans-serif }
H2 { font-family: sans-serif }
H3 { font-family: sans-serif }
H4 { font-family: sans-serif }
H5 { font-family: sans-serif }
H6 { font-family: sans-serif }
SUB { font-size: smaller }
SUP { font-size: smaller }
PRE { font-family: monospace }
A { text-decoration: none }
-->
</STYLE><LINK REL=STYLESHEET TYPE="text/css" HREF="jpgmanual.css">
</HEAD>
<BODY>
<A HREF="toc.html">目次</A> <A HREF="1222Differenttypeofwindrose.html">前へ</A> <A HREF="12231Specifyingwindrosescale.html">次へ</A>
<HR NOSHADE>
<h3><A NAME="12_2_3">2.3 基本風配図の作成とフォーマット</a></h3>
<p><br>
風配図グラフの作成には最初にライブラリ拡張モジュールである「jpgraph_windrose.php」を含めることが必要です。
<p>最初に含めない場合の風配図の作成は、グラフを作成してから１つあるいは複数の風配図プロットをキャンバスに加えていくという、ライブラリの通常のステップをいくつか踏むことになります。
<ol start="1" type="1">
  <li>基本キャンバスグラフをWindroseGraphクラスのインスタントとして作成する。</li>
  <li>一つまたは複数の風配図プロットのインスタンスをWindrosePlotクラスとして作成し、目盛りと外観の設定を行い、それらをグラフのキャンバスに追加します。</li>
  <li>「WindroseGraph::Stroke()」を呼び出して、グラフをクライアントに返します。いつものようにこれは、グラフをクライアント（つまりブラウザ側）に送り返すか、ファイルにグラフを書き込むために使います。ファイル名はWindroseGraph::Stroke()の第1引数として指定します。</li>
</ol>
<p>図2.3_1の例はすべてのパラメタに初期設定値のみ使用した場合の風配図です。</p>
<p>&nbsp;</p>
<p><strong>例2.3_1&nbsp;16方位の基本風配図</strong></p>
<DIV class="phpscript">(File:windrose_ex0.php)<br />
<code><span style="color: #000000"> <span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #FF8000">//&nbsp;content="text/plain;&nbsp;charset=utf-8"<br /> </span><span style="color: #007700">require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph.php'</span><span style="color: #007700">);<br /> require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph_windrose.php'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;データは軸番号か方位ラベルの両方で指定可能。<br /> </span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">8</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'WSW'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'N'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">8</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">1</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">15&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">));<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;まず新規の風配図をタイトルを付けて作成。<br /> </span><span style="color: #0000BB">$graph&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindroseGraph</span><span style="color: #007700">(</span><span style="color: #0000BB">400</span><span style="color: #007700">,</span><span style="color: #0000BB">400</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'A&nbsp;basic&nbsp;Windrose&nbsp;graph'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;風配図プロットを作成。<br /> </span><span style="color: #0000BB">$wp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindrosePlot</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;グラフを追加してブラウザに返す。<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$wp</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Stroke</span><span style="color: #007700">();<br /> </span><span style="color: #0000BB">?&gt;</span> </span> </code></DIV>

<p>
<div class="example">
<A href="example_src/frame_windrose_ex0.html" target="_blank"><img src="windrose_ex0.png" alt="" /></A>
<br /><B>図2.3_1</B> 方位の基本風配図<A href="example_src/frame_windrose_ex0.html" target="_blank">[ソース]</A>
</div></p>

<p>他のタイプのグラフ同様、風配図でも１つ以上の風配図プロットを自由に追加したり位置設定したりできます。位置は絶対数でも、グラフ全体の幅・高さに対する比率でも指定できます。</p>
<p>各風配図プロットをグラフに追加するには次のようにレイアウト・クラスのオブジェクトを呼び出すメソッドを使用します。</p>
<ul type="disc">
  <li>WindroseGraph::Add($aObject)  </li></ul>
<p>すべてのプロットが真ん中で衝突するのを避けるため、前のセクションで説明した位置設定とサイズ調整する方法を使用してください。 </p>
<p>次のスクリプトは２つのプロットがどのようにひとつのグラフに表示されるかを記述しています。</p>
<p><strong>例2.3_2 一つのグラフに２つの風配図プロットを追加</strong> </p>
<DIV class="phpscript">(File:windrose_2plots_ex1.php)<br />
<code><span style="color: #000000"> <span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #FF8000">//&nbsp;content="text/plain;&nbsp;charset=utf-8"<br /> </span><span style="color: #007700">require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph.php'</span><span style="color: #007700">);<br /> require_once&nbsp;(</span><span style="color: #DD0000">'jpgraph/jpgraph_windrose.php'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;データは軸番号でも方位ラベルでも指定可能。<br /> </span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">10</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">,</span><span style="color: #0000BB">13</span><span style="color: #007700">,</span><span style="color: #0000BB">7</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">8</span><span style="color: #007700">,</span><span style="color: #0000BB">10</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">12</span><span style="color: #007700">,</span><span style="color: #0000BB">22</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;);<br /> &nbsp;<br /> </span><span style="color: #0000BB">$data2&nbsp;</span><span style="color: #007700">=&nbsp;array(<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">12</span><span style="color: #007700">,</span><span style="color: #0000BB">8</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">,</span><span style="color: #0000BB">5</span><span style="color: #007700">,</span><span style="color: #0000BB">2</span><span style="color: #007700">),<br /> &nbsp;&nbsp;&nbsp;&nbsp;);<br /> &nbsp;<br /> </span><span style="color: #FF8000">//&nbsp;新規の風配図を作成<br /> </span><span style="color: #0000BB">$graph&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindroseGraph</span><span style="color: #007700">(</span><span style="color: #0000BB">660</span><span style="color: #007700">,</span><span style="color: #0000BB">400</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetShadow</span><span style="color: #007700">();<br /> &nbsp;<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'Two&nbsp;windrose&nbsp;plots&nbsp;in&nbsp;one&nbsp;graph'</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">title</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetFont</span><span style="color: #007700">(</span><span style="color: #0000BB">FF_ARIAL</span><span style="color: #007700">,</span><span style="color: #0000BB">FS_BOLD</span><span style="color: #007700">,</span><span style="color: #0000BB">14</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">subtitle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Set</span><span style="color: #007700">(</span><span style="color: #DD0000">'(Using&nbsp;Box()&nbsp;for&nbsp;each&nbsp;plot)'</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #0000BB">$wp&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindrosePlot</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetType</span><span style="color: #007700">(</span><span style="color: #0000BB">WINDROSE_TYPE8</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetSize</span><span style="color: #007700">(</span><span style="color: #0000BB">0.42</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetPos</span><span style="color: #007700">(</span><span style="color: #0000BB">0.25</span><span style="color: #007700">,</span><span style="color: #0000BB">0.55</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetBox</span><span style="color: #007700">();<br /> &nbsp;<br /> </span><span style="color: #0000BB">$wp2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">WindrosePlot</span><span style="color: #007700">(</span><span style="color: #0000BB">$data2</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetType</span><span style="color: #007700">(</span><span style="color: #0000BB">WINDROSE_TYPE16</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetSize</span><span style="color: #007700">(</span><span style="color: #0000BB">0.42</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetPos</span><span style="color: #007700">(</span><span style="color: #0000BB">0.74</span><span style="color: #007700">,</span><span style="color: #0000BB">0.55</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$wp2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetBox</span><span style="color: #007700">();<br /> </span><span style="color: #0000BB">$wp2</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">SetRangeColors</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,</span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">,</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,</span><span style="color: #DD0000">'brown'</span><span style="color: #007700">));<br /> &nbsp;<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$wp</span><span style="color: #007700">);<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Add</span><span style="color: #007700">(</span><span style="color: #0000BB">$wp2</span><span style="color: #007700">);<br /> &nbsp;<br /> </span><span style="color: #0000BB">$graph</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Stroke</span><span style="color: #007700">();<br /> </span><span style="color: #0000BB">?&gt;</span> </span> </code></DIV>
<p>
<div class="example" style="margin-left: 4em;">
<A href="example_src/frame_windrose_2plots_ex1.html" target="_blank"><img src="windrose_2plots_ex1.png" alt="" /></A>
<br /><B>図2.3_2</B> 同じグラフに２つの風配図プロットを追加<A href="example_src/frame_windrose_2plots_ex1.html" target="_blank">[ソース]</A>
</div></p>

<p></p>
<hr noshade>
<A HREF="toc.html">目次</A> <a href="1222Differenttypeofwindrose.html">前へ </a><a href="12231Specifyingwindrosescale.html">次へ</a>
</BODY>
</HTML>
